{"ast":null,"code":"export default {\n  name: \"Register\",\n  data() {\n    let checkUage = (rule, value, callback) => {\n      if (value > 150) {\n        callback(new Error('年龄过大'));\n      } else {\n        callback();\n      }\n    };\n    let checkDuplicate = (rule, value, callback) => {\n      if (this.form.uid) {\n        return callback();\n      }\n      this.$axios.get(this.$httpUrl + '/user/findByUname?uname=' + this.form.uname).then(res => res.data).then(res => {\n        if (res.code != 200) {\n          callback();\n        } else {\n          callback(new Error('名称已存在'));\n        }\n      });\n    };\n    return {\n      rules: {\n        uname: [{\n          required: true,\n          message: '请输入名称',\n          trigger: 'blur'\n        }, {\n          validator: checkDuplicate,\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 8,\n          message: '长度在 3 到 8 个字符',\n          trigger: 'blur'\n        }],\n        uage: [{\n          required: true,\n          message: '请输入年龄',\n          trigger: 'blur'\n        }, {\n          min: 1,\n          max: 3,\n          message: '长度在 1 到 3 个字符',\n          trigger: 'blur'\n        }, {\n          pattern: /^([1-9][0-9]*){1,3}$/,\n          message: '年龄必须是正整数',\n          trigger: 'blur'\n        }, {\n          validator: checkUage,\n          trigger: 'blur'\n        }],\n        address: [{\n          required: true,\n          message: '请输入地址',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 18,\n          message: '长度在 3 到 18 个字符',\n          trigger: 'blur'\n        }],\n        uphone: [{\n          required: true,\n          message: '请输入电话',\n          trigger: 'blur'\n        }, {\n          pattern: /^1[3|4|5|6|7|8|9][0-9]\\d{8}$/,\n          message: '请输入正确的手机号',\n          trigger: 'blur'\n        }]\n      },\n      registerForm: {\n        uname: '',\n        password: '',\n        usex: '1',\n        uage: '',\n        address: '',\n        uphone: '',\n        role: '2'\n      }\n    };\n  },\n  methods: {\n    blackLogin() {\n      this.$router.replace('/');\n    }\n  }\n};","map":{"version":3,"names":["name","data","checkUage","rule","value","callback","Error","checkDuplicate","form","uid","$axios","get","$httpUrl","uname","then","res","code","rules","required","message","trigger","validator","password","min","max","uage","pattern","address","uphone","registerForm","usex","role","methods","blackLogin","$router","replace"],"sources":["src/components/Register.vue"],"sourcesContent":["<template>\r\n  <div class=\"registerDiv\">\r\n    <div class=\"registerContent\">\r\n      <h2 class=\"registerTitle\">用户注册</h2>\r\n      <el-form ref=\"registerForm\"\r\n               :model=\"registerForm\"\r\n               label-width=\"100px\"\r\n               :rules=\"rules\">\r\n        <el-form-item prop=\"uname\" label=\"名称\">\r\n          <el-input v-model=\"registerForm.uname\" style=\"width: 80%\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"password\" label=\"密码\">\r\n          <el-input v-model=\"registerForm.password\" style=\"width: 80%\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"usex\" label=\"性别\">\r\n          <el-radio-group v-model=\"registerForm.usex\">\r\n            <el-radio label=\"1\">男</el-radio>\r\n            <el-radio label=\"0\">女</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item prop=\"uage\" label=\"年龄\">\r\n          <el-input v-model=\"registerForm.uage\" style=\"width: 80%\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"address\" label=\"地址\">\r\n          <el-input v-model=\"registerForm.address\" style=\"width: 80%\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"uphone\" label=\"电话\">\r\n          <el-input v-model=\"registerForm.uphone\" style=\"width: 80%\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"role\" label=\"角色\">\r\n          <el-radio-group v-model=\"registerForm.role\">\r\n            <el-radio label=\"0\">超级管理员</el-radio>\r\n            <el-radio label=\"1\">管理员</el-radio>\r\n            <el-radio label=\"2\">员工</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button @click=\"blackLogin\"\r\n                     style=\"margin-left:70px\"\r\n                     :disabled=\"blackLogin_disabled\">返回登录页面</el-button>\r\n          <el-button type=\"primary\"\r\n                     @click=\"loginUser\"\r\n                     :disabled=\"loginUser_disabled\">注册并登录</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Register\",\r\n  data(){\r\n    let checkUage=(rule,value,callback) => {\r\n      if(value>150){\r\n        callback(new Error('年龄过大'));\r\n      }else {\r\n        callback();\r\n      }\r\n    };\r\n    let checkDuplicate = (rule,value,callback) =>{\r\n      if(this.form.uid){\r\n        return callback();\r\n      }\r\n      this.$axios.get(this.$httpUrl+'/user/findByUname?uname='+this.form.uname)\r\n          .then(res=>res.data).then(res=>{\r\n        if (res.code!=200){\r\n          callback();\r\n        }else {\r\n          callback(new Error('名称已存在'));\r\n        }\r\n      })\r\n    };\r\n    return{\r\n      rules: {\r\n        uname: [\r\n          { required: true, message: '请输入名称', trigger: 'blur' },\r\n          { validator: checkDuplicate,trigger: 'blur'}\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n          { min: 3, max: 8, message: '长度在 3 到 8 个字符', trigger: 'blur' }\r\n        ],\r\n        uage: [\r\n          { required: true, message: '请输入年龄', trigger: 'blur' },\r\n          { min: 1, max: 3, message: '长度在 1 到 3 个字符', trigger: 'blur' },\r\n          {pattern: /^([1-9][0-9]*){1,3}$/,message: '年龄必须是正整数',trigger: 'blur'},\r\n          {validator: checkUage,trigger: 'blur'}\r\n        ],\r\n        address: [\r\n          { required: true, message: '请输入地址', trigger: 'blur' },\r\n          { min: 3, max: 18, message: '长度在 3 到 18 个字符', trigger: 'blur' }\r\n        ],\r\n        uphone: [\r\n          { required: true, message: '请输入电话', trigger: 'blur' },\r\n          { pattern: /^1[3|4|5|6|7|8|9][0-9]\\d{8}$/,message: '请输入正确的手机号',trigger: 'blur' }\r\n        ],\r\n      },\r\n      registerForm:{\r\n        uname:'',\r\n        password:'',\r\n        usex:'1',\r\n        uage:'',\r\n        address:'',\r\n        uphone:'',\r\n        role:'2'\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    blackLogin(){\r\n      this.$router.replace('/');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.registerDiv {\r\n  margin: auto;\r\n  width: 30%;\r\n  height: 30%;\r\n}\r\n.registerTitle {\r\n  margin-top: 5%;\r\n  text-align: center;\r\n}\r\n.registerContent{\r\n  margin-top: 35%;\r\n  border: gray 1px solid;\r\n}\r\n.el-form {\r\n  margin-top: 5%;\r\n}\r\n</style>"],"mappings":"AAkDA;EACAA,IAAA;EACAC,KAAA;IACA,IAAAC,SAAA,GAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,IAAAD,KAAA;QACAC,QAAA,KAAAC,KAAA;MACA;QACAD,QAAA;MACA;IACA;IACA,IAAAE,cAAA,GAAAA,CAAAJ,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,SAAAG,IAAA,CAAAC,GAAA;QACA,OAAAJ,QAAA;MACA;MACA,KAAAK,MAAA,CAAAC,GAAA,MAAAC,QAAA,qCAAAJ,IAAA,CAAAK,KAAA,EACAC,IAAA,CAAAC,GAAA,IAAAA,GAAA,CAAAd,IAAA,EAAAa,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACAX,QAAA;QACA;UACAA,QAAA,KAAAC,KAAA;QACA;MACA;IACA;IACA;MACAW,KAAA;QACAJ,KAAA,GACA;UAAAK,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,SAAA,EAAAd,cAAA;UAAAa,OAAA;QAAA,EACA;QACAE,QAAA,GACA;UAAAJ,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAG,GAAA;UAAAC,GAAA;UAAAL,OAAA;UAAAC,OAAA;QAAA,EACA;QACAK,IAAA,GACA;UAAAP,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAG,GAAA;UAAAC,GAAA;UAAAL,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAM,OAAA;UAAAP,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,SAAA,EAAAnB,SAAA;UAAAkB,OAAA;QAAA,EACA;QACAO,OAAA,GACA;UAAAT,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAG,GAAA;UAAAC,GAAA;UAAAL,OAAA;UAAAC,OAAA;QAAA,EACA;QACAQ,MAAA,GACA;UAAAV,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAM,OAAA;UAAAP,OAAA;UAAAC,OAAA;QAAA;MAEA;MACAS,YAAA;QACAhB,KAAA;QACAS,QAAA;QACAQ,IAAA;QACAL,IAAA;QACAE,OAAA;QACAC,MAAA;QACAG,IAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,WAAA;MACA,KAAAC,OAAA,CAAAC,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}