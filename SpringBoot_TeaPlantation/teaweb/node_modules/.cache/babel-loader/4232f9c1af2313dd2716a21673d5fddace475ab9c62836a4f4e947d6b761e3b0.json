{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n//引用echarts\nimport * as echarts from 'echarts';\nexport default {\n  name: \"personnelVisualizationMain\",\n  data() {\n    return {\n      trafficList: [],\n      trafficDay: [],\n      day: [],\n      moth: [],\n      year: []\n    };\n  },\n  props: {},\n  methods: {\n    //将前端收到的date数据转换成标准格式\n    changeTime(date) {\n      let date0 = date.substring(0, 8);\n      let date1 = date.substring(8, 10);\n      let date2 = (parseInt(date1) + 1).toString();\n      let newDate = date0 + date2;\n      return newDate;\n    },\n    getTrafficList() {\n      this.$axios.get(this.$httpUrl + '/visualization/listTraffic').then(res => res.data).then(res => {\n        console.log(res);\n        if (res.code == 200) {\n          for (const item of res.data) {\n            item.date = this.changeTime(item.date);\n          }\n          this.trafficList = res.data;\n          //获取数组\n          for (let i = 0; i < res.total; i++) {\n            this.trafficDay.push(res.data[i].date);\n            this.day.push(res.data[i].daynumber);\n            this.moth.push(res.data[i].mothnumber);\n            this.year.push(res.data[i].yearnumber);\n          }\n          console.log(this.trafficDay);\n          console.log(this.day);\n          console.log(this.moth);\n          console.log(this.year);\n          this.getTrafficChart();\n        } else {\n          alert(\"数据获取失败\");\n        }\n      });\n    },\n    getTrafficChart() {\n      let trafficEcharts = echarts.init(document.getElementById(\"trafficChart\"));\n      let option = {\n        title: {\n          //echarts的标题\n          text: '游客人流量图'\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross',\n            label: {\n              backgroundColor: '#6a7985'\n            }\n          }\n        },\n        legend: {\n          data: ['日人流量', '月人流量', '年人流量']\n        },\n        xAxis: {\n          type: 'category',\n          data: this.trafficDay\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          //系列\n          name: '日人流量',\n          type: 'line',\n          //stack:\"traffic\",//设置这个会导致折线图不准确\n          data: this.day,\n          //样式填充\n          areaStyle: {},\n          //设置高亮\n          emphasis: {\n            focus: 'series'\n          }\n        }, {\n          name: '月人流量',\n          type: 'line',\n          //stack:\"traffic\",\n          data: this.moth,\n          //样式填充\n          areaStyle: {},\n          //设置高亮\n          emphasis: {\n            focus: 'series'\n          }\n        }, {\n          name: '年人流量',\n          type: 'line',\n          //stack:\"traffic\",\n          data: this.year,\n          //样式填充\n          areaStyle: {},\n          //设置高亮\n          emphasis: {\n            focus: 'series'\n          }\n        }]\n      };\n      trafficEcharts.setOption(option);\n    },\n    getEmployeeTotal() {\n      this.$axios.get(this.$httpUrl + '/visualization/').then(res => res.data).then(res => {\n        console.log(res);\n        if (res.code == 200) {\n          for (const item of res.data) {\n            item.date = this.changeTime(item.date);\n          }\n          this.trafficList = res.data;\n          //获取数组\n          for (let i = 0; i < res.total; i++) {\n            this.trafficDay.push(res.data[i].date);\n            this.day.push(res.data[i].daynumber);\n            this.moth.push(res.data[i].mothnumber);\n            this.year.push(res.data[i].yearnumber);\n          }\n          console.log(this.trafficDay);\n          console.log(this.day);\n          console.log(this.moth);\n          console.log(this.year);\n          this.getTrafficChart();\n        } else {\n          alert(\"数据获取失败\");\n        }\n      });\n    }\n  },\n  beforeMount() {\n    this.getTrafficList();\n  }\n};","map":{"version":3,"names":["echarts","name","data","trafficList","trafficDay","day","moth","year","props","methods","changeTime","date","date0","substring","date1","date2","parseInt","toString","newDate","getTrafficList","$axios","get","$httpUrl","then","res","console","log","code","item","i","total","push","daynumber","mothnumber","yearnumber","getTrafficChart","alert","trafficEcharts","init","document","getElementById","option","title","text","tooltip","trigger","axisPointer","type","label","backgroundColor","legend","xAxis","yAxis","series","areaStyle","emphasis","focus","setOption","getEmployeeTotal","beforeMount"],"sources":["src/components/visualization/personnelVisualizationMain.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div id=\"trafficChart\"></div>\r\n    <div id=\"employeeChart\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n//引用echarts\r\nimport * as echarts from 'echarts';\r\nexport default {\r\n  name: \"personnelVisualizationMain\",\r\n  data() {\r\n    return {\r\n      trafficList:[],\r\n      trafficDay:[],\r\n      day:[],\r\n      moth:[],\r\n      year:[]\r\n    }\r\n  },\r\n  props: {\r\n\r\n  },\r\n  methods: {\r\n    //将前端收到的date数据转换成标准格式\r\n    changeTime(date) {\r\n      let date0 = date.substring(0, 8);\r\n      let date1 = date.substring(8,10);\r\n      let date2 = (parseInt(date1) + 1).toString();\r\n      let newDate = date0 + date2;\r\n      return newDate;\r\n    },\r\n    getTrafficList() {\r\n      this.$axios.get(this.$httpUrl+'/visualization/listTraffic')\r\n          .then(res=>res.data).then(res=>{\r\n            console.log(res);\r\n            if(res.code==200){\r\n              for (const item of res.data){\r\n                item.date = this.changeTime(item.date);\r\n              }\r\n              this.trafficList = res.data;\r\n              //获取数组\r\n              for (let i = 0; i<res.total; i++){\r\n                this.trafficDay.push(res.data[i].date);\r\n                this.day.push(res.data[i].daynumber);\r\n                this.moth.push(res.data[i].mothnumber);\r\n                this.year.push(res.data[i].yearnumber);\r\n              }\r\n              console.log(this.trafficDay);\r\n              console.log(this.day);\r\n              console.log(this.moth);\r\n              console.log(this.year);\r\n              this.getTrafficChart();\r\n            }else {\r\n              alert(\"数据获取失败\");\r\n            }\r\n      });\r\n    },\r\n    getTrafficChart() {\r\n      let trafficEcharts = echarts.init(document.getElementById(\"trafficChart\"));\r\n      let option = {\r\n        title:{//echarts的标题\r\n          text:'游客人流量图'\r\n        },\r\n        tooltip: {\r\n          trigger: 'axis',\r\n          axisPointer: {\r\n            type: 'cross',\r\n            label: {\r\n              backgroundColor: '#6a7985'\r\n            }\r\n          }\r\n        },\r\n        legend: {\r\n          data: ['日人流量', '月人流量', '年人流量'],\r\n        },\r\n        xAxis: {\r\n          type: 'category',\r\n          data: this.trafficDay\r\n        },\r\n        yAxis: {\r\n          type: 'value'\r\n        },\r\n        series: [\r\n          {//系列\r\n            name:'日人流量',\r\n            type:'line',\r\n            //stack:\"traffic\",//设置这个会导致折线图不准确\r\n            data:this.day,\r\n            //样式填充\r\n            areaStyle:{},\r\n            //设置高亮\r\n            emphasis: {\r\n              focus:'series'\r\n            }\r\n          },\r\n          {\r\n            name:'月人流量',\r\n            type:'line',\r\n            //stack:\"traffic\",\r\n            data:this.moth,\r\n            //样式填充\r\n            areaStyle:{},\r\n            //设置高亮\r\n            emphasis: {\r\n              focus:'series'\r\n            }\r\n          },\r\n          {\r\n            name:'年人流量',\r\n            type:'line',\r\n            //stack:\"traffic\",\r\n            data:this.year,\r\n            //样式填充\r\n            areaStyle:{},\r\n            //设置高亮\r\n            emphasis: {\r\n              focus:'series'\r\n            }\r\n          }\r\n        ]\r\n      }\r\n      trafficEcharts.setOption(option);\r\n    },\r\n    getEmployeeTotal() {\r\n      this.$axios.get(this.$httpUrl+'/visualization/')\r\n          .then(res=>res.data).then(res=>{\r\n        console.log(res);\r\n        if(res.code==200){\r\n          for (const item of res.data){\r\n            item.date = this.changeTime(item.date);\r\n          }\r\n          this.trafficList = res.data;\r\n          //获取数组\r\n          for (let i = 0; i<res.total; i++){\r\n            this.trafficDay.push(res.data[i].date);\r\n            this.day.push(res.data[i].daynumber);\r\n            this.moth.push(res.data[i].mothnumber);\r\n            this.year.push(res.data[i].yearnumber);\r\n          }\r\n          console.log(this.trafficDay);\r\n          console.log(this.day);\r\n          console.log(this.moth);\r\n          console.log(this.year);\r\n          this.getTrafficChart();\r\n        }else {\r\n          alert(\"数据获取失败\");\r\n        }\r\n      });\r\n    },\r\n  },\r\n  beforeMount() {\r\n    this.getTrafficList();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n #trafficChart {\r\n   width: 500px;\r\n   height: 500px;;\r\n   border: 1px #000 solid;\r\n }\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}