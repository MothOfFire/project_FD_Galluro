{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n//引用echarts\nimport * as echarts from 'echarts';\nexport default {\n  name: \"personnelVisualizationMain\",\n  data() {\n    return {\n      trafficList: [],\n      trafficDay: [],\n      day: [],\n      moth: [],\n      year: []\n    };\n  },\n  props: {},\n  methods: {\n    //将前端收到的date数据转换成标准格式\n    changeTime(date) {\n      let newDate = date.substring(0, 8);\n      let date1 = date.substring(8, 10);\n      let date2 = (parseInt(date1) + 1).toString();\n      let newTime = newDate + date2;\n      return newTime;\n    },\n    getTrafficList: function () {\n      this.$axios.get(this.$httpUrl + '/visualization/listTraffic').then(res => res.data).then(res => {\n        console.log(res);\n        if (res.code == 200) {\n          for (const item of res.data) {\n            // item.date = item.date.substring(0,10);\n            item.date = this.changeTime(item.date);\n          }\n          this.trafficList = res.data;\n          //获取数组\n          for (let i = 0; i < res.total; i++) {\n            this.trafficDay.push(res.data[i].date);\n            this.day.push(res.data[i].daynumber);\n            this.moth.push(res.data[i].mothnumber);\n            this.year.push(res.data[i].yearnumber);\n          }\n          console.log(this.trafficDay);\n          console.log(this.day);\n          console.log(this.moth);\n          console.log(this.year);\n        } else {\n          alert(\"数据获取失败\");\n        }\n      });\n    }\n    // getDay(){\n    //   for (let i = 0; i<this.trafficList.length; i++){\n    //     this.trafficDay[i] = this.trafficList[i].date.substring(8,10);\n    //     console.log(this.trafficDay);\n    //   }\n    // }\n  },\n\n  mounted() {\n    let myEcharts = echarts.init(document.getElementById(\"myChart\"));\n    //设置参数\n    let date = this.trafficDay;\n    let day = this.day;\n    let moth = this.moth;\n    let year = this.year;\n    let option = {\n      title: {\n        //echarts的标题\n        text: '游客流量图'\n      },\n      xAxis: {\n        type: 'category',\n        data: date\n      },\n      yAxis: {\n        type: 'value'\n      },\n      series: [{\n        //系列\n        name: '日人流量',\n        type: 'line',\n        stack: \"traffic\",\n        data: day\n      }, {\n        name: '月人流量',\n        type: 'line',\n        stack: \"traffic\",\n        data: moth\n      }, {\n        name: '年人流量',\n        type: 'line',\n        stack: \"traffic\",\n        data: year\n      }]\n    };\n    myEcharts.setOption(option);\n  },\n  beforeMount() {\n    this.getTrafficList();\n  }\n};","map":{"version":3,"names":["echarts","name","data","trafficList","trafficDay","day","moth","year","props","methods","changeTime","date","newDate","substring","date1","date2","parseInt","toString","newTime","getTrafficList","$axios","get","$httpUrl","then","res","console","log","code","item","i","total","push","daynumber","mothnumber","yearnumber","alert","mounted","myEcharts","init","document","getElementById","option","title","text","xAxis","type","yAxis","series","stack","setOption","beforeMount"],"sources":["src/components/visualization/personnelVisualizationMain.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div id=\"myChart\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n//引用echarts\r\nimport * as echarts from 'echarts';\r\nexport default {\r\n  name: \"personnelVisualizationMain\",\r\n  data() {\r\n    return {\r\n      trafficList:[],\r\n      trafficDay:[],\r\n      day:[],\r\n      moth:[],\r\n      year:[]\r\n    }\r\n  },\r\n  props: {\r\n\r\n  },\r\n  methods: {\r\n    //将前端收到的date数据转换成标准格式\r\n    changeTime(date) {\r\n      let newDate = date.substring(0, 8);\r\n      let date1 = date.substring(8,10);\r\n      let date2 = (parseInt(date1) + 1).toString();\r\n      let newTime = newDate + date2;\r\n      return newTime;\r\n    },\r\n    getTrafficList: function () {\r\n      this.$axios.get(this.$httpUrl+'/visualization/listTraffic')\r\n          .then(res=>res.data).then(res=>{\r\n            console.log(res);\r\n            if(res.code==200){\r\n              for (const item of res.data){\r\n                // item.date = item.date.substring(0,10);\r\n                item.date = this.changeTime(item.date);\r\n              }\r\n              this.trafficList = res.data;\r\n              //获取数组\r\n              for (let i = 0; i<res.total; i++){\r\n                this.trafficDay.push(res.data[i].date);\r\n                this.day.push(res.data[i].daynumber);\r\n                this.moth.push(res.data[i].mothnumber);\r\n                this.year.push(res.data[i].yearnumber);\r\n              }\r\n              console.log(this.trafficDay);\r\n              console.log(this.day);\r\n              console.log(this.moth);\r\n              console.log(this.year);\r\n            }else {\r\n              alert(\"数据获取失败\");\r\n            }\r\n      });\r\n    },\r\n    // getDay(){\r\n    //   for (let i = 0; i<this.trafficList.length; i++){\r\n    //     this.trafficDay[i] = this.trafficList[i].date.substring(8,10);\r\n    //     console.log(this.trafficDay);\r\n    //   }\r\n    // }\r\n  },\r\n  mounted() {\r\n    let myEcharts = echarts.init(document.getElementById(\"myChart\"));\r\n        //设置参数\r\n    let date = this.trafficDay;\r\n    let day = this.day;\r\n    let moth = this.moth;\r\n    let year = this.year;\r\n\r\n    let option = {\r\n      title:{//echarts的标题\r\n        text:'游客流量图'\r\n      },\r\n      xAxis: {\r\n        type: 'category',\r\n        data: date\r\n      },\r\n      yAxis: {\r\n        type: 'value'\r\n      },\r\n      series: [\r\n        {//系列\r\n          name:'日人流量',\r\n          type:'line',\r\n          stack:\"traffic\",\r\n          data:day\r\n        },\r\n        {\r\n          name:'月人流量',\r\n          type:'line',\r\n          stack:\"traffic\",\r\n          data:moth\r\n        },\r\n        {\r\n          name:'年人流量',\r\n          type:'line',\r\n          stack:\"traffic\",\r\n          data:year\r\n        }\r\n      ]\r\n    }\r\n    myEcharts.setOption(option);\r\n  },\r\n  beforeMount() {\r\n    this.getTrafficList();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n #myChart {\r\n   width: 400px;\r\n   height: 400px;;\r\n   border: 1px #000 solid;\r\n }\r\n</style>"],"mappings":";AAOA;AACA,YAAAA,OAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,WAAA;MACAC,UAAA;MACAC,GAAA;MACAC,IAAA;MACAC,IAAA;IACA;EACA;EACAC,KAAA,GAEA;EACAC,OAAA;IACA;IACAC,WAAAC,IAAA;MACA,IAAAC,OAAA,GAAAD,IAAA,CAAAE,SAAA;MACA,IAAAC,KAAA,GAAAH,IAAA,CAAAE,SAAA;MACA,IAAAE,KAAA,IAAAC,QAAA,CAAAF,KAAA,OAAAG,QAAA;MACA,IAAAC,OAAA,GAAAN,OAAA,GAAAG,KAAA;MACA,OAAAG,OAAA;IACA;IACAC,cAAA,WAAAA,CAAA;MACA,KAAAC,MAAA,CAAAC,GAAA,MAAAC,QAAA,iCACAC,IAAA,CAAAC,GAAA,IAAAA,GAAA,CAAAtB,IAAA,EAAAqB,IAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;QACA,IAAAA,GAAA,CAAAG,IAAA;UACA,WAAAC,IAAA,IAAAJ,GAAA,CAAAtB,IAAA;YACA;YACA0B,IAAA,CAAAjB,IAAA,QAAAD,UAAA,CAAAkB,IAAA,CAAAjB,IAAA;UACA;UACA,KAAAR,WAAA,GAAAqB,GAAA,CAAAtB,IAAA;UACA;UACA,SAAA2B,CAAA,MAAAA,CAAA,GAAAL,GAAA,CAAAM,KAAA,EAAAD,CAAA;YACA,KAAAzB,UAAA,CAAA2B,IAAA,CAAAP,GAAA,CAAAtB,IAAA,CAAA2B,CAAA,EAAAlB,IAAA;YACA,KAAAN,GAAA,CAAA0B,IAAA,CAAAP,GAAA,CAAAtB,IAAA,CAAA2B,CAAA,EAAAG,SAAA;YACA,KAAA1B,IAAA,CAAAyB,IAAA,CAAAP,GAAA,CAAAtB,IAAA,CAAA2B,CAAA,EAAAI,UAAA;YACA,KAAA1B,IAAA,CAAAwB,IAAA,CAAAP,GAAA,CAAAtB,IAAA,CAAA2B,CAAA,EAAAK,UAAA;UACA;UACAT,OAAA,CAAAC,GAAA,MAAAtB,UAAA;UACAqB,OAAA,CAAAC,GAAA,MAAArB,GAAA;UACAoB,OAAA,CAAAC,GAAA,MAAApB,IAAA;UACAmB,OAAA,CAAAC,GAAA,MAAAnB,IAAA;QACA;UACA4B,KAAA;QACA;MACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;;EACAC,QAAA;IACA,IAAAC,SAAA,GAAArC,OAAA,CAAAsC,IAAA,CAAAC,QAAA,CAAAC,cAAA;IACA;IACA,IAAA7B,IAAA,QAAAP,UAAA;IACA,IAAAC,GAAA,QAAAA,GAAA;IACA,IAAAC,IAAA,QAAAA,IAAA;IACA,IAAAC,IAAA,QAAAA,IAAA;IAEA,IAAAkC,MAAA;MACAC,KAAA;QAAA;QACAC,IAAA;MACA;MACAC,KAAA;QACAC,IAAA;QACA3C,IAAA,EAAAS;MACA;MACAmC,KAAA;QACAD,IAAA;MACA;MACAE,MAAA,GACA;QAAA;QACA9C,IAAA;QACA4C,IAAA;QACAG,KAAA;QACA9C,IAAA,EAAAG;MACA,GACA;QACAJ,IAAA;QACA4C,IAAA;QACAG,KAAA;QACA9C,IAAA,EAAAI;MACA,GACA;QACAL,IAAA;QACA4C,IAAA;QACAG,KAAA;QACA9C,IAAA,EAAAK;MACA;IAEA;IACA8B,SAAA,CAAAY,SAAA,CAAAR,MAAA;EACA;EACAS,YAAA;IACA,KAAA/B,cAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}