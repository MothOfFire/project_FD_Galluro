{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"parkadeMain\",\n  data() {\n    return {\n      user: JSON.parse(sessionStorage.getItem(\"CurUser\")),\n      tableData: [],\n      cid: '',\n      carnumber: '',\n      vid: '',\n      iscar: '',\n      iscars: [{\n        value: 'false',\n        label: '空车'\n      }, {\n        value: 'true',\n        label: '有车'\n      }],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      centerDialogVisible: false,\n      carForm: {\n        cid: '',\n        iscar: 'false',\n        carnumber: '',\n        vid: ''\n      },\n      rules: {\n        carnumber: [{\n          required: true,\n          message: '请输入正确的车牌号',\n          trigger: 'blur'\n        }, {\n          min: 7,\n          max: 7,\n          message: '长度7个字符',\n          trigger: 'blur'\n        }, {\n          pattern: /^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    handleSizeChange(val) {\n      console.log(`每页 ${val} 条`);\n      this.pageNum = 1;\n      this.pageSize = val;\n      this.loadPost();\n    },\n    handleCurrentChange(val) {\n      console.log(`当前页: ${val}`);\n      this.pageNum = val;\n      this.loadPost();\n    },\n    loadPost() {\n      if (this.user != null) {\n        this.$axios.post(this.$httpUrl + '/car/listAllPage', {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          param: {\n            cid: this.cid,\n            iscar: this.iscar\n          }\n        }).then(res => res.data).then(res => {\n          console.log(res);\n          if (res.code == 200) {\n            this.tableData = res.data;\n            this.total = res.total;\n          } else {\n            alert(\"数据获取失败\");\n          }\n        });\n      } else {\n        this.$confirm('未登入请登录后再进入？', '提示', {\n          confirmButtonText: '确定去登入',\n          //确认按钮文字显示\n          type: 'warning',\n          center: true,\n          //文字居中\n          showCancelButton: false,\n          //不显示取消按钮\n          closeOnClickModal: false //是否可以点击空白处关闭弹窗\n        }).then(() => {\n          this.$router.push('/');\n          sessionStorage.clear();\n        }).catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"大哥哥(姐姐)快去登录吧！！\"\n          });\n        });\n      }\n    },\n    resetForm() {\n      this.carForm.cid = '';\n      this.carForm.vid = '';\n      this.carForm.iscar = 'false';\n      this.carForm.carnumber = '';\n    },\n    resetParam() {\n      this.cid = '';\n      this.iscar = '';\n    },\n    handleClose(done) {\n      this.$confirm('确认关闭？').then(_ => {\n        done();\n      }).catch(_ => {});\n    },\n    updateCar(row) {\n      this.centerDialogVisible = true;\n      this.$nextTick(() => {\n        //赋值到表单\n        this.carForm.cid = row.cid;\n        this.carForm.vid = row.vid;\n        this.carForm.carnumber = row.carnumber;\n        this.carForm.iscar = row.iscar;\n      });\n    },\n    outCar(row) {\n      this.carForm.cid = row.cid;\n      this.carForm.carnumber = null;\n      this.carForm.iscar = 'false';\n      this.carForm.vid = '';\n      this.$axios.post(this.$httpUrl + '/car/updateCar', this.carForm).then(res => res.data).then(res => {\n        console.log(res);\n        if (res.code == 200) {\n          this.$message({\n            showClose: true,\n            message: '数据修改成功',\n            type: 'success'\n          });\n          this.loadPost();\n        } else {\n          this.$message({\n            showClose: true,\n            message: '数据修改失败',\n            type: 'error'\n          });\n        }\n      });\n    },\n    save() {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          this.$axios.post(this.$httpUrl + '/car/updateCar', this.carForm).then(res => res.data).then(res => {\n            console.log(res);\n            if (res.code == 200) {\n              this.$message({\n                showClose: true,\n                message: '数据修改成功',\n                type: 'success'\n              });\n              this.centerDialogVisible = false;\n              this.loadPost();\n              this.resetForm();\n            } else {\n              this.$message({\n                showClose: true,\n                message: '数据修改失败',\n                type: 'error'\n              });\n            }\n          });\n        }\n      });\n    }\n  },\n  beforeMount() {\n    this.loadPost();\n  }\n};","map":{"version":3,"names":["name","data","user","JSON","parse","sessionStorage","getItem","tableData","cid","carnumber","vid","iscar","iscars","value","label","pageNum","pageSize","total","centerDialogVisible","carForm","rules","required","message","trigger","min","max","pattern","methods","handleSizeChange","val","console","log","loadPost","handleCurrentChange","$axios","post","$httpUrl","param","then","res","code","alert","$confirm","confirmButtonText","type","center","showCancelButton","closeOnClickModal","$router","push","clear","catch","$message","resetForm","resetParam","handleClose","done","_","updateCar","row","$nextTick","outCar","showClose","save","$refs","form","validate","valid","beforeMount"],"sources":["src/components/visitor/parkadeMain.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div style=\"margin-bottom: 5px\">\r\n      <el-input v-model=\"cid\"\r\n                placeholder=\"请输入车位编号\"\r\n                suffix-icon=\"el-icon-search\"\r\n                style=\"width: 200px\"\r\n                @keyup.enter.native=\"loadPost\"></el-input>\r\n      <el-select v-model=\"iscar\"\r\n                 filterable placeholder=\"是否空车\"\r\n                 style=\"margin-left: 5px\">\r\n        <el-option\r\n            v-for=\"item in iscars\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\">\r\n        </el-option>\r\n      </el-select>\r\n      <el-button type=\"primary\"\r\n                 style=\"margin-left: 5px\"\r\n                 @click=\"loadPost\">查询</el-button>\r\n      <el-button type=\"success\"\r\n                 @click=\"resetParam\">重置</el-button>\r\n    </div>\r\n    <div>\r\n      <template>\r\n        <el-row :gutter=\"20\"  class=\"el-row\" type=\"flex\">\r\n          <el-col :span=\"8\" v-for = \"(item,index) in tableData\" :key=\"item.id\" class=\"el-col\">\r\n            <el-card class=\"el-card\"  :key=\"index\">\r\n\r\n            </el-card>\r\n          </el-col>\r\n        </el-row>\r\n      </template>\r\n    </div>\r\n    <el-table :data=\"tableData\"\r\n              :header-cell-style=\"{backgroundColor:'rgba(156,180,184,0.5)'}\"\r\n              :border=\"true\">\r\n      <el-table-column prop=\"cid\" label=\"车位Id\" width=\"80\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"vid\" label=\"车主id\" width=\"120\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"carnumber\" label=\"车牌号\" width=\"160\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"iscar\" label=\"是否空位\" width=\"80\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag\r\n              :type=\"scope.row.iscar === 'false' ? 'primary' : 'success'\"\r\n              disable-transitions>{{scope.row.iscar === 'false' ? '空位' : '有车'}}</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"operate\" label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"small\"\r\n                     type=\"success\"\r\n                     @click=\"updateCar(scope.row)\">登记</el-button>\r\n          <el-popconfirm title=\"确定删除吗？\"\r\n                         style=\"margin-left: 5px\"\r\n                         @confirm=\"outCar(scope.row)\">\r\n            <el-button slot=\"reference\"\r\n                       size=\"small\"\r\n                       type=\"danger\">离开</el-button>\r\n          </el-popconfirm>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!--分页组件-->\r\n    <el-pagination\r\n        style=\"margin-top: 15px\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"pageNum\"\r\n        :page-sizes=\"[ 5, 10, 15,20]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\">\r\n    </el-pagination>\r\n    <!--对话框 centerDialogVisible用来控制对话框是否出现（true表示出现）-->\r\n    <el-dialog\r\n        title=\"提示\"\r\n        :visible.sync=\"centerDialogVisible\"\r\n        width=\"30%\"\r\n        center\r\n        :before-close=\"handleClose\">\r\n      <el-form ref=\"form\" :model=\"carForm\" :rules=\"rules\" label-width=\"80px\">\r\n        <el-form-item prop=\"cid\" label=\"车位编号\">\r\n          <el-input v-model=\"carForm.cid\" style=\"width: 80%\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"vid\" label=\"车主编号\">\r\n          <el-input v-model=\"carForm.vid\" style=\"width: 80%\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"iscar\" label=\"是否空车\">\r\n          <el-radio-group v-model=\"carForm.iscar\">\r\n            <el-radio label=\"true\">有车</el-radio>\r\n            <el-radio label=\"false\">没车</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item prop=\"carnumber\" label=\"车牌号\">\r\n          <el-input v-model=\"carForm.carnumber\" style=\"width: 80%\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button @click=\"centerDialogVisible = false\">取 消</el-button>\r\n    <el-button type=\"primary\" @click=\"save\">确 定</el-button>\r\n  </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"parkadeMain\",\r\n  data(){\r\n    return{\r\n      user : JSON.parse(sessionStorage.getItem(\"CurUser\")),\r\n      tableData:[],\r\n      cid:'',\r\n      carnumber:'',\r\n      vid:'',\r\n      iscar:'',\r\n      iscars:[\r\n        {\r\n          value: 'false',\r\n          label: '空车'\r\n        },\r\n        {\r\n          value: 'true',\r\n          label: '有车'\r\n        }\r\n      ],\r\n      pageNum:1,\r\n      pageSize:10,\r\n      total:0,\r\n      centerDialogVisible:false,\r\n      carForm:{\r\n        cid:'',\r\n        iscar:'false',\r\n        carnumber:'',\r\n        vid:''\r\n      },\r\n      rules: {\r\n        carnumber: [\r\n          { required: true, message: '请输入正确的车牌号', trigger: 'blur' },\r\n          { min: 7, max: 7, message: '长度7个字符', trigger: 'blur' },\r\n          {pattern: /^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/,\r\n            trigger: 'blur'},\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n      this.pageNum = 1;\r\n      this.pageSize=val;\r\n      this.loadPost();\r\n    },\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n      this.pageNum = val;\r\n      this.loadPost();\r\n    },\r\n    loadPost(){\r\n      if(this.user != null){\r\n        this.$axios.post(this.$httpUrl+'/car/listAllPage',\r\n            {\r\n              pageNum:this.pageNum,\r\n              pageSize:this.pageSize,\r\n              param:{\r\n                cid:this.cid,\r\n                iscar:this.iscar\r\n              }\r\n            }\r\n        ).then(res=>res.data).then(res=>{\r\n          console.log(res);\r\n          if(res.code==200){\r\n            this.tableData = res.data;\r\n            this.total = res.total;\r\n          }else {\r\n            alert(\"数据获取失败\");\r\n          }\r\n        });\r\n      }else {\r\n        this.$confirm('未登入请登录后再进入？','提示',{\r\n          confirmButtonText:'确定去登入',//确认按钮文字显示\r\n          type:'warning',\r\n          center:true,//文字居中\r\n          showCancelButton:false,//不显示取消按钮\r\n          closeOnClickModal:false,//是否可以点击空白处关闭弹窗\r\n        }).then(()=>{\r\n          this.$router.push('/');\r\n          sessionStorage.clear();\r\n        }).catch(()=>{\r\n          this.$message({\r\n            type:\"info\",\r\n            message:\"大哥哥(姐姐)快去登录吧！！\"\r\n          });\r\n        });\r\n      }\r\n    },\r\n    resetForm(){\r\n      this.carForm.cid = '';\r\n      this.carForm.vid = '';\r\n      this.carForm.iscar = 'false';\r\n      this.carForm.carnumber = '';\r\n    },\r\n    resetParam(){\r\n      this.cid = '';\r\n      this.iscar = '';\r\n    },\r\n    handleClose(done) {\r\n      this.$confirm('确认关闭？')\r\n          .then(_ => {\r\n            done();\r\n          })\r\n          .catch(_ => {});\r\n    },\r\n    updateCar(row){\r\n        this.centerDialogVisible = true;\r\n        this.$nextTick(()=>{\r\n          //赋值到表单\r\n          this.carForm.cid = row.cid;\r\n          this.carForm.vid = row.vid;\r\n          this.carForm.carnumber = row.carnumber;\r\n          this.carForm.iscar = row.iscar;\r\n        });\r\n    },\r\n    outCar(row){\r\n        this.carForm.cid = row.cid;\r\n        this.carForm.carnumber = null;\r\n        this.carForm.iscar = 'false';\r\n        this.carForm.vid = '';\r\n      this.$axios.post(this.$httpUrl + '/car/updateCar', this.carForm)\r\n          .then(res => res.data).then(res => {\r\n        console.log(res);\r\n        if (res.code == 200) {\r\n          this.$message({\r\n            showClose: true,\r\n            message: '数据修改成功',\r\n            type: 'success'\r\n          });\r\n          this.loadPost();\r\n        } else {\r\n          this.$message({\r\n            showClose: true,\r\n            message: '数据修改失败',\r\n            type: 'error'\r\n          });\r\n        }\r\n      });\r\n    },\r\n    save(){\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          this.$axios.post(this.$httpUrl + '/car/updateCar', this.carForm)\r\n              .then(res => res.data).then(res => {\r\n            console.log(res);\r\n            if (res.code == 200) {\r\n              this.$message({\r\n                showClose: true,\r\n                message: '数据修改成功',\r\n                type: 'success'\r\n              });\r\n              this.centerDialogVisible = false;\r\n              this.loadPost();\r\n              this.resetForm();\r\n            } else {\r\n              this.$message({\r\n                showClose: true,\r\n                message: '数据修改失败',\r\n                type: 'error'\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n  },\r\n  beforeMount() {\r\n    this.loadPost();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}